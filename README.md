**地铁数据分析与可视化项目**



**项目流程**



**1. 数据提取与清洗**

​	1.	使用脚本 analyze_transport.py 提取 2018records.jsons 中的信息，将结果导出为 output.csv，最终生成了包含 **880,300 条记录** 的数据文件。

​	2.	利用 transform_subway.py 脚本对原始数据进行以下转换：

​	•	将中文地铁线路名称转换为数字编码（例如：“地铁五号线” -> 5）。

​	•	将交易类型转换为数字编码（例如：入站 -> 0，出站 -> 1）。

​	3.	数据文件说明：

​	•	原始数据存储在 output.csv。

​	•	转换后的数据存储在 output_transformed.csv。



**2. 数据扩展与获取**

​	1.	**站点坐标获取**：

​	•	使用脚本 get_station_coordinates.py 调用高德地图 API 获取每个地铁站的经纬度坐标。

​	2.	**坐标转换**：

​	•	由于高德地图 API 提供的坐标为 GCJ-02 坐标系，而绘图地图使用的是 WGS-84 坐标系，使用 convert_coordinates.py 脚本完成坐标转换。

​	3.	**站点周边兴趣点 (POI) 分析**：

​	•	脚本 analyze_station.py 调用高德地图 API 获取地铁站周边的兴趣点信息 (Points of Interest, POIs)。

​	•	提取的 POI 类型包括：

​	•	类型 1: 医院

​	•	类型 2: 学校

​	•	类型 3: 商业设施

​	•	类型 4: 科教文化

​	•	类型 5: 办公区域

​	•	类型 6: 交通设施

​	•	类型 7: 住宅区域

​	•	通过加权评分计算每个站点的综合得分，确定站点的主要兴趣点类型，最终结果保存为 CSV 文件。



**3. 数据可视化**

​	1.	**站点绘制**：

​	•	在地图上绘制每个地铁站的圆圈，显示客流信息：

​	•	**蓝色圆圈**：表示该站点的出站客流量。

​	•	**红色圆圈**：表示该站点的入站客流量。

​	•	点击任意站点时：

​	•	显示红色和蓝色线条，分别表示与该站相关的流量方向：

​	•	**红色线条**：以该站为终点的流量起始站。

​	•	**蓝色线条**：以该站为起点的流量终点站。

​	•	展示与该站点相关的前 5 名站点流量关系，并显示相应的桑基图（右上角）。

​	2.	**兴趣点 (POI) 可视化**：

​	•	根据站点周边的 POI 数据，在地图上标记重要兴趣点。

​	•	为每个站点生成雷达图，展示不同 POI 类型的评分分布。



![1](img/1.png)

![2](img/2.png)